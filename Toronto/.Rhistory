install.packages("cancensus")
library(cancensus)
options(cancensus.api_key='CensusMapper_e1b9908b65dcb10a0b2a319881b1cfe2')
census_data <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2426","v_CA16_2298","v_CA16_2299"),
labels="detailed", geo_format="SF", level='DA')
census_data <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2426","v_CA16_2298","v_CA16_2299"),
labels="detailed", geo_format="sf", level='DA')
#install.packages("cancensus")
install.packages("tidyverse")
library(tidyverse)
census_data <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2426","v_CA16_2298","v_CA16_2299"),
labels="detailed", geo_format="sf", level='DA')
View(census_data)
#install.packages("cancensus")
#install.packages("tidyverse")
library(cancensus)
library(tidyverse)
file.edit(file.path("~/.Rprofile"))
options(cancensus.api_key='CensusMapper_e1b9908b65dcb10a0b2a319881b1cfe2')
options(cancensus.cache_path =file.path("~"))
Aurora <-
census_data <- get_census(dataset='CA16',
regions=list(CSD="3519046"),
vectors=c("v_CA16_2426"),
labels="detailed", geo_format="sf", level='DA')
glimpse(Aurora)
Aurora2<-rename(Aurora, "money"=`v_CA16_2426: Total - Household after-tax income groups in 2015 for private households - 100% data`)
ggplot(Aurora2, aes(geometry=geometry, fill="Money"))+geom_sf()
Aurora2%>%
mutate(pct=(money/Households)*100)->Aurora3
ggplot(Aurora3, aes(geometry=geometry, fill=pct))+geom_sf()
census_data <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
census_data <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
toronto <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
View(toronto)
glimpse(toronto)
rename(toronto, Men=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
rename(toronto, women=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
rename(toronto, total=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto2<-rename(toronto, Men=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto2<-rename(toronto, women=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto2<-rename(toronto, total=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto2)
toronto2<-rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto2<-rename(toronto, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto2<-rename(toronto, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto2)
toronto2<-rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto3<-rename(toronto, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto4<-rename(toronto, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto4)
View(toronto4)
View(toronto3)
View(toronto2)
toronto <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
glimpse(toronto)
View(toronto)
glimpse(toronto)
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`,
"Women"=  `v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`,
"Total"= `v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)->Toronto2
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`, "Women"=  `v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`, "Total"= `v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)->Toronto2
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`,
"Women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`,
"Total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)->Toronto2
?
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)->Toronto2
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto%>%
rename(toronto, "Men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto)
glimpse(toronto)
rename(toronto, "men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto2<-rename(toronto, "men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
rename(toronto2, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto3<-rename(toronto2, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
rename(toronto3, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto4<-rename(toronto3, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto4)
glimpse(toronto4)
names(toronto4)
toronto4%>%
gather(sex, n, men, women)->toronto5
ggplot(toronto5, aes(geometry=geometry, fill=n))+facet_wrap(~sex)+geom_sf()
toronto <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
toronto2<-rename(toronto, "men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto3<-rename(toronto2, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto4<-rename(toronto3, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
glimpse(toronto4)
View(toronto4)
toronto4%>%
rename("men"=12, "women"=13)=>toronto5
toronto4%>%
rename("men"=12, "women"=13)=> toronto5
toronto4%>%
rename("men"=12, "women"=13)->toronto5
View(toronto5)
toronto4%>%
rename("men"=14, "women"=15)->toronto5
toronto5%>%
gather(Sex, n, men, women)->toronto6
ggplot(toronto6, aes(geometry=geometry, fill=n))+facet_wrap(~Sex)+geom_sf()
ggplot(toronto6, aes(geometry=geometry, fill="total"))+facet_wrap(~Sex)+geom_sf()
ggplot(toronto6, aes(geometry=geometry, fill="total"))+facet_wrap(~Sex)+geom_sf()
View(toronto6)
toronto <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
View(toronto)
toronto2<-rename(toronto, "men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto3<-rename(toronto2, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto4<-rename(toronto3, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
glimpse(toronto4)
toronto4%>%
gather(Sex, n, men, women)->toronto5
View(toronto5)
toronto <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
toronto2<-rename(toronto, "men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto3<-rename(toronto2, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto3)
toronto4<-rename(toronto3, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
View(toronto4)
toronto4%>%
mutate(pct=(men/total)*100)->toronto5
View(toronto5)
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()
toronto4%>%
mutate(pct=(men/total)*100),
mutate(pct2=(women/total)*100)->toronto5
mutate(pct=(men/total)*100,
toronto4%>%
mutate(pct2=(women/total)*100)->toronto5
toronto4%>%
mutate(pct=(men/total)*100)
mutate(pct2=(women/total)*100)->toronto5
toronto4%>%
mutate(pct=(men/total)*100)->toronto5
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()
toronto4%>%
mutate(pct=(women/total)*100)->toronto5
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()
toronto4%>%
mutate(pct=(men/total)*100)->toronto5
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()
View(toronto5)
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution of wealth")
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()+
scale_fill_gradient(low="deepskyblue2", high="firebrick1", name="Distribution of wealth")
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()+
scale_fill_viridis(option="magma", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()+
scale_fill_viridis(option="magma", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()+
scale_fill_viridis(option="blue", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()+
scale_fill_gradient(option="blue", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct))+geom_sf()+
scale_fill_gradient(option="blue", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct, color=NA))+geom_sf()+
coord_sf(datum=NA) +
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings") +
scale_fill_viridis(option="magma", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct, color=NA))+geom_sf()+
coord_sf(datum=NA) +
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings") +
scale_fill_gradient(option="magma", direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct, color=NA))+geom_sf()+
coord_sf(datum=NA) +
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="blue"))+geom_sf()+
coord_sf(datum=NA) +
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")
#mutate(pct2=(women/total)*100)
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="blue"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")
ggplot(toronto5, aes(geometry=geometry, fill=pct, color=NA))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")+
scale_fill_viridis(option="magma", direction=-1) +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")+
scale_fill_gradient(option="magma", direction=-1) +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")+
scale_fill_gradient(option="magma", direction=-1) +
NULL
toronto5%>%
gather(Sex, n, men, women)->toronto6
ggplot(toronto5, aes(geometry=geometry, fill="total"))+facet_wrap(~Sex)+geom_sf()
toronto5%>%
gather(n, men, women)->toronto6
ggplot(toronto5, aes(geometry=geometry, fill="total"))+facet_wrap(~Sex)+geom_sf()
toronto <- get_census(dataset='CA16',
regions=list(CMA="35535"),
vectors=c("v_CA16_2298","v_CA16_2299","v_CA16_2297"),
labels="detailed", geo_format="sf", level='DA')
toronto2<-rename(toronto, "men"=`v_CA16_2298: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto3<-rename(toronto2, "women"=`v_CA16_2299: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto4<-rename(toronto3, "total"=`v_CA16_2297: Total - After-tax income groups in 2015 for the population aged 15 years and over in private households - 100% data`)
toronto4%>%
mutate(pct=(men/total)*100)->toronto5
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")+
scale_fill_gradient(option="magma", direction=-1) +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")+
scale_fill_continuous(direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+geom_sf()+
labs(title = "Distribution of wealth",
subtitle = "2015",
fill = "% of Earnings")+
scale_fill_continuous(direction=-1)
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="white") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'transparent')) +
scale_fill_distiller(palette="Reds", direction=1, name="Estimate") +
labs(title="Percent unemployed in Jersey City", caption="Source: US Census/ACS5 2016") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'black')) +
scale_fill_distiller(palette="blues", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="white") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'black')) +
scale_color_gradient(low = "blue", high = "red", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="white") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'black')) +
scale_color_gradient(low = "blue", high = "red", name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="grey") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'black')) +
scale_color_gradient(low = "blue", high = "red", name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'white')) +
scale_color_gradient(low = "blue", high = "red", name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'white')) +
scale_color_gradient(low = "blue", name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'black')) +
scale_fill_distiller(palette="reds", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'black')) +
scale_fill_distiller(palette="Reds", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'white')) +
scale_fill_distiller(palette="Reds", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'white')) +
scale_fill_distiller(palette="Blues", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
ggplot(toronto5, aes(geometry=geometry, fill=pct, color="black"))+
geom_sf(color="black") +
theme_void() +
theme(panel.grid.major = element_line(colour = 'white')) +
scale_fill_distiller(palette="Reds", direction=1, name="%") +
labs(title="Mens distribution of earnings", caption="2015") +
NULL
#install.packages("cancensus")
#install.packages("tidyverse")
install.packages("viridis")
library(viridis)
